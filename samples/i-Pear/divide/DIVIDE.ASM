; BASE=160
DIVA EQU 160 ;160~163
DIVB EQU 164 ;164
RES EQU 165  ;165~166
COUNT EQU 167

LD A,#19H
STO DIVA+2,A
LD A,#0C3H
STO DIVA+3,A

LD A,#19H
STO DIVB,A

LD A,#0
STO COUNT,A
STO DIVA,A
STO DIVA+1,A
STO RES,A
STO RES+1,A

LOOP:

CLEAR #0
LD A,DIVA+3
SHL A
STO DIVA+3,A
LD A,DIVA+2
SHL A
STO DIVA+2,A
LD A,DIVA+1
SHL A
STO DIVA+1,A
LD A,DIVA
SHL A
STO DIVA,A

CLEAR #0
LD A,RES+1
SHL A
STO RES+1,A
LD A,RES
SHL A
STO RES,A

; COMPARE
LD A,DIVA
ADD A,#0
JZ STEP2
JMP BIGGER

STEP2:
; DIVA[1]-DIVB[0]
LD A,DIVB
STO R0,A
LD A,DIVA+1
SUBC A,R0
JZ BIGGER ; EQUAL -> MINUS
JC NO_BIGGER ; DIVB BIGGER, DO NOTHING
JMP BIGGER

BIGGER:
CLEAR #0

LD A,DIVB
STO R0,A
LD A,DIVA+1
SUBC A,R0
STO DIVA+1,A
LD A,DIVA
SUBC A,#0
STO DIVA,A

LD A,RES+1
ADD A,#1
STO RES+1,A

NO_BIGGER:

LD A,COUNT
ADD A,#1
STO COUNT,A
SUBC A,#16
JZ ENDING
JMP LOOP
ENDING:

;DISPLAY RESULT

LD A,RES
STO R0,A
LD A,RES+1
STO R1,A

LD A,DIVA
STO R2,A
LD A,DIVA+1
STO R3,A

ENDLESS_LOOP:
JMP ENDLESS_LOOP
